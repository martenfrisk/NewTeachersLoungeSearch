import{N as e,S as t,i as s,s as r,e as n,t as a,k as l,c as o,a as i,g as c,d as h,n as f,b as u,f as d,F as p,I as m,G as g,h as b,O as v,l as x,P as y,J as w,z as E,j as $,m as D,o as S,v as N,r as k,w as I}from"../chunks/vendor-b8ec7456.js";import{e as T}from"../chunks/episodes-3e46e8d3.js";const j="YWE1YTgwNTBlNjk4MjNkZDI3NDk3OTlj".toString(),P=["guinness","ridiculous voice","bronco","lasagna","big nightmare","el chapo","cheetah man","see you in court","beef diaper","bottomless piggy bank","scarecrow","south pole santa","Wimberley","tricky dick","picasso","grotesque genitals","bethany hart","morrissey","goths","famously","oj simpson","let's just say"],V=new e({host:"https://ts.pcast.site/",apiKey:j});async function A(e,t=[],s=!1){const r=V.index("teachers");console.log({filter:t});const n=new URLSearchParams(`s=${e}`);if(!s&&history.pushState){let e=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n;t.length>0&&(e=`${e}&f=${t.map((e=>e.replace(" = ","="))).join(",")}`),window.history.pushState({path:e},"",e)}const a=t.length>0?await r.search(e,{attributesToHighlight:["line"],filters:t.length>1?t.join(" OR "):t.toString(),facetsDistribution:["season","episode"]}):await r.search(e,{attributesToHighlight:["line"],facetsDistribution:["season","episode"]}),l=[];return void 0!==a&&a.facetsDistribution&&Object.entries(a.facetsDistribution).forEach((([e,t])=>{const s=[];Object.entries(t).forEach((([e,t])=>{s.push({ep:e,hits:t})})),s.sort(((e,t)=>t.hits-e.hits)),l.push({facetName:e,facetHits:s.slice(0,9)})})),{stats:{nbHits:a.nbHits,processingTime:a.processingTimeMs,facets:l},hits:a.hits}}const q=e=>{const t=new URLSearchParams;return t.append("t",e),t};function H(){return P[(e=P.length,Math.floor(Math.random()*Math.floor(e)))];var e}function M(e,t,s){const r=e.slice();return r[14]=t[s],r}function L(e,t,s){const r=e.slice();return r[17]=t[s],r}function O(e,t,s){const r=e.slice();return r[17]=t[s],r}function R(e){let t,s,r,m,g,b,x,y,w,E,$,D,S,N,k,I,T=e[2].length>0&&U(e),j=e[3].facets.find(Z).facetHits,P=[];for(let n=0;n<j.length;n+=1)P[n]=B(O(e,j,n));let V=e[3].facets.find(Q).facetHits,A=[];for(let n=0;n<V.length;n+=1)A[n]=_(L(e,V,n));return{c(){t=n("div"),s=n("details"),r=n("summary"),m=n("span"),g=a("Filter by season or episode"),b=l(),T&&T.c(),x=l(),y=n("div"),w=n("span"),E=a("season:"),$=l();for(let e=0;e<P.length;e+=1)P[e].c();D=l(),S=n("div"),N=n("span"),k=a("episode:"),I=l();for(let e=0;e<A.length;e+=1)A[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var n=i(t);s=o(n,"DETAILS",{});var a=i(s);r=o(a,"SUMMARY",{class:!0});var l=i(r);m=o(l,"SPAN",{class:!0});var u=i(m);g=c(u,"Filter by season or episode"),u.forEach(h),b=f(l),T&&T.l(l),l.forEach(h),x=f(a),y=o(a,"DIV",{class:!0});var d=i(y);w=o(d,"SPAN",{});var p=i(w);E=c(p,"season:"),p.forEach(h),$=f(d);for(let t=0;t<P.length;t+=1)P[t].l(d);d.forEach(h),D=f(a),S=o(a,"DIV",{class:!0});var v=i(S);N=o(v,"SPAN",{});var j=i(N);k=c(j,"episode:"),j.forEach(h),I=f(v);for(let t=0;t<A.length;t+=1)A[t].l(v);v.forEach(h),a.forEach(h),n.forEach(h),this.h()},h(){u(m,"class","hover:underline"),u(r,"class","cursor-pointer "),u(y,"class","flex w-full my-2 gap-2"),u(S,"class","flex w-full gap-2"),u(t,"class","w-full flex flex-col flex-wrap px-6 my-2 gap-2")},m(e,n){d(e,t,n),p(t,s),p(s,r),p(r,m),p(m,g),p(r,b),T&&T.m(r,null),p(s,x),p(s,y),p(y,w),p(w,E),p(y,$);for(let t=0;t<P.length;t+=1)P[t].m(y,null);p(s,D),p(s,S),p(S,N),p(N,k),p(S,I);for(let t=0;t<A.length;t+=1)A[t].m(S,null)},p(e,t){if(e[2].length>0?T?T.p(e,t):(T=U(e),T.c(),T.m(r,null)):T&&(T.d(1),T=null),76&t){let s;for(j=e[3].facets.find(Z).facetHits,s=0;s<j.length;s+=1){const r=O(e,j,s);P[s]?P[s].p(r,t):(P[s]=B(r),P[s].c(),P[s].m(y,null))}for(;s<P.length;s+=1)P[s].d(1);P.length=j.length}if(76&t){let s;for(V=e[3].facets.find(Q).facetHits,s=0;s<V.length;s+=1){const r=L(e,V,s);A[s]?A[s].p(r,t):(A[s]=_(r),A[s].c(),A[s].m(S,null))}for(;s<A.length;s+=1)A[s].d(1);A.length=V.length}},d(e){e&&h(t),T&&T.d(),v(P,e),v(A,e)}}}function U(e){let t,s,r,l;return{c(){t=n("span"),s=a("(clear filters)"),this.h()},l(e){t=o(e,"SPAN",{class:!0});var r=i(t);s=c(r,"(clear filters)"),r.forEach(h),this.h()},h(){u(t,"class","ml-2 border-b border-gray-500 border-dotted text-sm text-gray-700")},m(n,a){d(n,t,a),p(t,s),r||(l=m(t,"click",e[7]),r=!0)},p:g,d(e){e&&h(t),r=!1,l()}}}function B(e){let t,s,r,l,f,g,v,x,y=e[17].ep+"",w=e[17].hits+"";function E(){return e[11](e[17])}return{c(){t=n("button"),s=a(y),r=a(" ("),l=a(w),f=a(")"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var n=i(t);s=c(n,y),r=c(n," ("),l=c(n,w),f=c(n,")"),n.forEach(h),this.h()},h(){u(t,"class",g="border border-blue-500 px-2 py-px focus:outline-none focus:border-black rounded-lg "+(e[2].includes(`season = ${e[17].ep}`)?"bg-blue-500 text-white":"bg-white text-black"))},m(e,n){d(e,t,n),p(t,s),p(t,r),p(t,l),p(t,f),v||(x=m(t,"click",E),v=!0)},p(r,n){e=r,8&n&&y!==(y=e[17].ep+"")&&b(s,y),8&n&&w!==(w=e[17].hits+"")&&b(l,w),12&n&&g!==(g="border border-blue-500 px-2 py-px focus:outline-none focus:border-black rounded-lg "+(e[2].includes(`season = ${e[17].ep}`)?"bg-blue-500 text-white":"bg-white text-black"))&&u(t,"class",g)},d(e){e&&h(t),v=!1,x()}}}function _(e){let t,s,r,l,f,g,v,x,y=e[17].ep+"",w=e[17].hits+"";function E(){return e[12](e[17])}return{c(){t=n("button"),s=a(y),r=a(" ("),l=a(w),f=a(")"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var n=i(t);s=c(n,y),r=c(n," ("),l=c(n,w),f=c(n,")"),n.forEach(h),this.h()},h(){u(t,"class",g="border border-blue-500 px-2 py-px rounded-lg "+(e[2].includes(`episode = ${e[17].ep}`)?"bg-blue-500 text-white":"bg-white text-black"))},m(e,n){d(e,t,n),p(t,s),p(t,r),p(t,l),p(t,f),v||(x=m(t,"click",E),v=!0)},p(r,n){e=r,8&n&&y!==(y=e[17].ep+"")&&b(s,y),8&n&&w!==(w=e[17].hits+"")&&b(l,w),12&n&&g!==(g="border border-blue-500 px-2 py-px rounded-lg "+(e[2].includes(`episode = ${e[17].ep}`)?"bg-blue-500 text-white":"bg-white text-black"))&&u(t,"class",g)},d(e){e&&h(t),v=!1,x()}}}function F(e){let t,s;return{c(){t=n("p"),s=n("span"),this.h()},l(e){t=o(e,"P",{class:!0});var r=i(t);s=o(r,"SPAN",{class:!0}),i(s).forEach(h),r.forEach(h),this.h()},h(){u(s,"class","h-8 bg-gray-100 animate-pulse w-20"),u(t,"class","mt-6 mb-8")},m(e,r){d(e,t,r),p(t,s)},p:g,d(e){e&&h(t)}}}function Y(e){let t,s,r,m,g,v,x,y,w,E,$,D,S=e[3].nbHits+"",N=e[2].length>0?` in ${e[2].map(X).join(", ")}`:"",k=e[3].processingTime+"";return{c(){t=n("p"),s=a(S),r=a(" hits for "),m=n("em"),g=a(e[0]),v=l(),x=a(N),y=l(),w=n("span"),E=a("(results retrieved in "),$=a(k),D=a("ms)"),this.h()},l(n){t=o(n,"P",{class:!0});var a=i(t);s=c(a,S),r=c(a," hits for "),m=o(a,"EM",{});var l=i(m);g=c(l,e[0]),l.forEach(h),v=f(a),x=c(a,N),y=f(a),w=o(a,"SPAN",{class:!0});var u=i(w);E=c(u,"(results retrieved in "),$=c(u,k),D=c(u,"ms)"),u.forEach(h),a.forEach(h),this.h()},h(){u(w,"class","text-sm"),u(t,"class","mt-6 mb-8")},m(e,n){d(e,t,n),p(t,s),p(t,r),p(t,m),p(m,g),p(t,v),p(t,x),p(t,y),p(t,w),p(w,E),p(w,$),p(w,D)},p(e,t){8&t&&S!==(S=e[3].nbHits+"")&&b(s,S),1&t&&b(g,e[0]),4&t&&N!==(N=e[2].length>0?` in ${e[2].map(X).join(", ")}`:"")&&b(x,N),8&t&&k!==(k=e[3].processingTime+"")&&b($,k)},d(e){e&&h(t)}}}function W(e){let t,s,r,m,b,v;return{c(){t=n("div"),s=n("div"),r=n("div"),m=a(" "),b=l(),v=n("div"),this.h()},l(e){t=o(e,"DIV",{class:!0});var n=i(t);s=o(n,"DIV",{class:!0});var a=i(s);r=o(a,"DIV",{class:!0});var l=i(r);m=c(l," "),l.forEach(h),a.forEach(h),b=f(n),v=o(n,"DIV",{class:!0}),i(v).forEach(h),n.forEach(h),this.h()},h(){u(r,"class","rounded-md animate-pulse w-1/2 bg-gray-200 h-8"),u(s,"class","flex flex-col flex-wrap items-start gap-2 justify-between w-full mb-2"),u(v,"class","bg-gray-200 animate-pulse rounded-md h-10 py-2 pl-4 mt-4 md:text-lg"),u(t,"class","w-full px-4 pt-4 pb-6 mb-6 shadow-md")},m(e,n){d(e,t,n),p(t,s),p(s,r),p(r,m),p(t,b),p(t,v)},p:g,d(e){e&&h(t)}}}function z(e){let t,s=e[1],r=[];for(let n=0;n<s.length;n+=1)r[n]=J(M(e,s,n));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=x()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=x()},m(e,s){for(let t=0;t<r.length;t+=1)r[t].m(e,s);d(e,t,s)},p(e,n){if(18&n){let a;for(s=e[1],a=0;a<s.length;a+=1){const l=M(e,s,a);r[a]?r[a].p(l,n):(r[a]=J(l),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(e){v(r,e),e&&h(t)}}}function C(e){let t,s;return{c(){t=n("span"),s=a("−"),this.h()},l(e){t=o(e,"SPAN",{class:!0});var r=i(t);s=c(r,"−"),r.forEach(h),this.h()},h(){u(t,"class","text-2xl text-gray-400")},m(e,r){d(e,t,r),p(t,s)},d(e){e&&h(t)}}}function G(e){let t,s;return{c(){t=n("span"),s=a("✔"),this.h()},l(e){t=o(e,"SPAN",{class:!0});var r=i(t);s=c(r,"✔"),r.forEach(h),this.h()},h(){u(t,"class","text-2xl text-green-400")},m(e,r){d(e,t,r),p(t,s)},d(e){e&&h(t)}}}function J(e){let t,s,r,m,g,v,x,y,w,E,$,D,S,N,k,I,T,j,P,V,A,H,M,L,O=e[4](e[14].episode).ep+"",R=e[4](e[14].episode).title+"",U=e[14].speaker+"",B=e[14].time+"",_=e[14]._formatted.line+"";function F(e,t){return e[14].edited?G:C}let Y=F(e),W=Y(e);return{c(){t=n("div"),s=n("div"),r=n("div"),m=n("div"),g=a(O),v=l(),x=n("div"),y=a(R),w=l(),E=n("div"),$=n("div"),D=a(U),S=l(),N=n("div"),k=n("a"),I=a("go to transcript"),j=l(),P=a(B),V=a(" \r\n\t\t\t\t\t"),W.c(),A=l(),H=n("div"),M=n("p"),L=l(),this.h()},l(e){t=o(e,"DIV",{class:!0});var n=i(t);s=o(n,"DIV",{class:!0});var a=i(s);r=o(a,"DIV",{class:!0});var l=i(r);m=o(l,"DIV",{class:!0});var u=i(m);g=c(u,O),u.forEach(h),v=f(l),x=o(l,"DIV",{class:!0});var d=i(x);y=c(d,R),d.forEach(h),l.forEach(h),w=f(a),E=o(a,"DIV",{class:!0});var p=i(E);$=o(p,"DIV",{class:!0});var b=i($);D=c(b,U),b.forEach(h),S=f(p),N=o(p,"DIV",{class:!0});var T=i(N);k=o(T,"A",{href:!0});var q=i(k);I=c(q,"go to transcript"),q.forEach(h),T.forEach(h),j=f(p),P=c(p,B),V=c(p," \r\n\t\t\t\t\t"),W.l(p),p.forEach(h),a.forEach(h),A=f(n),H=o(n,"DIV",{class:!0});var _=i(H);M=o(_,"P",{}),i(M).forEach(h),_.forEach(h),L=f(n),n.forEach(h),this.h()},h(){u(m,"class","mr-2 text-sm text-gray-800 uppercase"),u(x,"class","text-sm text-gray-900 md:text-base"),u(r,"class","flex items-center"),u($,"class","mr-2 font-sans text-black"),u(k,"href",T=`/ep/${e[4](e[14].episode).ep}?${q(`t-${e[14].time.replaceAll(":","")}`)}`),u(N,"class","mr-2 font-sans text-right text-blue-600 border-b-2 border-dotted"),u(E,"class","flex items-center font-mono text-right text-gray-600"),u(s,"class","flex flex-wrap items-center justify-between w-full mb-2"),u(H,"class","py-2 pl-4 mt-4 border-l-2 border-gray-400 md:text-lg"),u(t,"class","w-full px-4 pt-4 pb-6 mb-6 shadow-md hover:bg-blue-50")},m(e,n){d(e,t,n),p(t,s),p(s,r),p(r,m),p(m,g),p(r,v),p(r,x),p(x,y),p(s,w),p(s,E),p(E,$),p($,D),p(E,S),p(E,N),p(N,k),p(k,I),p(E,j),p(E,P),p(E,V),W.m(E,null),p(t,A),p(t,H),p(H,M),M.innerHTML=_,p(t,L)},p(e,t){2&t&&O!==(O=e[4](e[14].episode).ep+"")&&b(g,O),2&t&&R!==(R=e[4](e[14].episode).title+"")&&b(y,R),2&t&&U!==(U=e[14].speaker+"")&&b(D,U),2&t&&T!==(T=`/ep/${e[4](e[14].episode).ep}?${q(`t-${e[14].time.replaceAll(":","")}`)}`)&&u(k,"href",T),2&t&&B!==(B=e[14].time+"")&&b(P,B),Y!==(Y=F(e))&&(W.d(1),W=Y(e),W&&(W.c(),W.m(E,null))),2&t&&_!==(_=e[14]._formatted.line+"")&&(M.innerHTML=_)},d(e){e&&h(t),W.d()}}}function K(e){let t,s,r,b,v,E,$,D,S,N,k,I,T,j,P,V=e[3]&&R(e);function A(e,t){var s;return""!==e[0]&&(null==(s=e[3])?void 0:s.nbHits)>0?Y:F}let q=A(e),H=q(e);function M(e,t){return e[1]?z:W}let L=M(e),O=L(e);return{c(){t=n("div"),s=n("div"),r=n("label"),b=a("Search"),v=l(),E=n("input"),$=l(),D=n("button"),S=a("Random search"),N=l(),V&&V.c(),k=l(),H.c(),I=l(),O.c(),T=x(),this.h()},l(e){t=o(e,"DIV",{class:!0});var n=i(t);s=o(n,"DIV",{class:!0});var a=i(s);r=o(a,"LABEL",{for:!0,class:!0});var l=i(r);b=c(l,"Search"),l.forEach(h),a.forEach(h),v=f(n),E=o(n,"INPUT",{class:!0,type:!0,id:!0}),$=f(n),D=o(n,"BUTTON",{class:!0});var u=i(D);S=c(u,"Random search"),u.forEach(h),n.forEach(h),N=f(e),V&&V.l(e),k=f(e),H.l(e),I=f(e),O.l(e),T=x(),this.h()},h(){u(r,"for","search"),u(r,"class","text-sm"),u(s,"class","w-full pl-4"),u(E,"class","w-full md:w-4/5 h-12 px-4 shadow-md  rounded-l-md rounded-r-md md:rounded-r-none text-xl border border-gray-500 outline-none"),u(E,"type","text"),u(E,"id","search"),u(D,"class","w-1/2 md:w-1/5 h-12 rounded-l-md bg-blue-50 text-blue-800 font-semibold rounded-r-md md:rounded-l-none border-blue-500 border-2 px-2 text-sm md:text-base py-2 hover:bg-blue-500 hover:text-white hover:border-white shadow-md"),u(t,"class","w-full flex-wrap flex items-center my-4 px-6")},m(n,a){d(n,t,a),p(t,s),p(s,r),p(r,b),p(t,v),p(t,E),y(E,e[0]),p(t,$),p(t,D),p(D,S),d(n,N,a),V&&V.m(n,a),d(n,k,a),H.m(n,a),d(n,I,a),O.m(n,a),d(n,T,a),j||(P=[m(E,"input",e[9]),m(E,"keyup",e[10]),m(D,"click",e[8])],j=!0)},p(e,[t]){1&t&&E.value!==e[0]&&y(E,e[0]),e[3]?V?V.p(e,t):(V=R(e),V.c(),V.m(k.parentNode,k)):V&&(V.d(1),V=null),q===(q=A(e))&&H?H.p(e,t):(H.d(1),H=q(e),H&&(H.c(),H.m(I.parentNode,I))),L===(L=M(e))&&O?O.p(e,t):(O.d(1),O=L(e),O&&(O.c(),O.m(T.parentNode,T)))},i:g,o:g,d(e){e&&h(t),e&&h(N),V&&V.d(e),e&&h(k),H.d(e),e&&h(I),O.d(e),e&&h(T),j=!1,w(P)}}}const Z=e=>"season"===e.facetName,Q=e=>"episode"===e.facetName,X=e=>e.replace("=","");function ee(e,t,s){var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,a){function l(e){try{i(r.next(e))}catch(t){a(t)}}function o(e){try{i(r.throw(e))}catch(t){a(t)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(l,o)}i((r=r.apply(e,t||[])).next())}))};let n;String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)});let{query:a}=t,{hits:l}=t,{filter:o}=t;function i(){return r(this,void 0,void 0,(function*(){yield A(a,o).then((e=>{s(1,l=e.hits),s(3,n=e.stats)}))}))}function c(e,t){return r(this,void 0,void 0,(function*(){const r=`${e} = ${t}`;o.includes(r)?s(2,o=o.filter((e=>e!==r))):o.push(r),yield i()}))}E((()=>r(void 0,void 0,void 0,(function*(){if(""===a){s(0,a=H());const e=new URLSearchParams(`s=${a}`);if(history.pushState){let t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e;o.length>0&&(t=`${t}&f=${o.map((e=>e.replace(" = ","="))).join(",")}`),window.history.pushState({path:t},"",t)}}yield i()}))));return e.$$set=e=>{"query"in e&&s(0,a=e.query),"hits"in e&&s(1,l=e.hits),"filter"in e&&s(2,o=e.filter)},e.$$.update=()=>{e.$$.dirty},[a,l,o,n,function(e){return T.find((t=>t.ep===e))},i,c,function(){return r(this,void 0,void 0,(function*(){s(2,o=[]),yield i()}))},()=>r(void 0,void 0,void 0,(function*(){s(0,a=H()),s(2,o=[]),yield i()})),function(){a=this.value,s(0,a)},()=>((e,t)=>{let s=null;return r=>{clearTimeout(s),s=setTimeout((()=>t(r)),e)}})(500,i),e=>c("season",e.ep),e=>c("episode",e.ep)]}class te extends t{constructor(e){super(),s(this,e,ee,K,r,{query:0,hits:1,filter:2})}}function se(e){let t,s;return t=new te({props:{query:e[0],hits:e[1],filter:e[2]}}),{c(){$(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,r){S(t,e,r),s=!0},p(e,[s]){const r={};1&s&&(r.query=e[0]),2&s&&(r.hits=e[1]),4&s&&(r.filter=e[2]),t.$set(r)},i(e){s||(N(t.$$.fragment,e),s=!0)},o(e){k(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}var re=function(e,t,s,r){return new(s||(s=Promise))((function(n,a){function l(e){try{i(r.next(e))}catch(t){a(t)}}function o(e){try{i(r.throw(e))}catch(t){a(t)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(l,o)}i((r=r.apply(e,t||[])).next())}))};const ne=!0;function ae({page:e}){return re(this,void 0,void 0,(function*(){let t=e.query.get("s"),s=[];console.log("filter before",e.query.getAll("f")),e.query.has("f")&&(s=e.query.get("f").split(",").map((e=>e.replace("="," = ")))),console.log("filter after",s),""===t&&(t=H());const{hits:r}=yield A(t,s,!0);return{props:{query:t||"",hits:r||[],filter:s}}}))}function le(e,t,s){let{query:r}=t,{hits:n}=t,{filter:a}=t;return e.$$set=e=>{"query"in e&&s(0,r=e.query),"hits"in e&&s(1,n=e.hits),"filter"in e&&s(2,a=e.filter)},[r,n,a]}export default class extends t{constructor(e){super(),s(this,e,le,se,r,{query:0,hits:1,filter:2})}}export{ae as load,ne as prerender};
